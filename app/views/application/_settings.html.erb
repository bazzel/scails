<%= render(ModalComponent.new(title: "Settings")) do |m| %>
  <%= m.with_controller do %>
    <button
      type="button"
      class="
        relative p-1 text-gray-400 bg-gray-800 rounded-full hover:text-white
        focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2
        focus:ring-offset-gray-800
      "
    >
      <span class="absolute -inset-1.5"></span>
      <span class="sr-only">Settings</span>
      <%= inline_svg_tag("icons/cog-6-tooth.svg") %>
    </button>
  <% end %>
  <%= m.with_body do %>
    <%= form_with url: root_path, method: :get, data: { modal_target: "form" } do |form| %>
      <div class="relative mb-6">
        <%= form.select :root_note,
                    ChromaticScale::NOTES,
                    { selected: params[:root_note] },
                    class: "form-select peer" %>
        <%= form.label :root_note, "Root note", class: "form-label" %>
        <p class="form-text">Select the root note to start with.</p>
      </div>
      <div class="relative mb-6">
        <%= form.select :pattern_name,
                    @pattern_names_and_labels,
                    { selected: params[:pattern_name] },
                    class: "form-select peer" %>
        <%= form.label :pattern_name, "Pattern", class: "form-label" %>
      </div>
      <div class="relative mb-6">
        <%= form.label(
          :loop,
          class: "flex justify-between items-center cursor-pointer gap-2",
        ) do |builder| %>
          <div>
            <div class="text-base">Loop</div>
            <div class="text-xs text-gray-500 dark:text-gray-400">Keep playing until you click the Stop button</div>
          </div>
          <%= form.check_box :loop,
                         class: "sr-only peer",
                         checked: params[:loop].present?,
                         include_hidden: false %>
          <div class="form-switch peer"></div>

        <% end %>
      </div>

      <div class="relative mb-6">
        <label for="labels-range-input" class="sr-only">Labels range</label>
        <input
          id="labels-range-input"
          type="range"
          value="1000"
          min="100"
          max="1500"
          step="100"
          class="form-range"
        >
        <span
          class="
            absolute text-sm text-gray-500 dark:text-gray-400 start-0 -bottom-6
          "
        >Min ($100)</span>
        <span
          class="
            absolute text-sm text-gray-500 -translate-x-1/2 dark:text-gray-400 start-1/3
            rtl:translate-x-1/2 -bottom-6
          "
        >$500</span>
        <span
          class="
            absolute text-sm text-gray-500 -translate-x-1/2 dark:text-gray-400 start-2/3
            rtl:translate-x-1/2 -bottom-6
          "
        >$1000</span>
        <span class="absolute text-sm text-gray-500 dark:text-gray-400 end-0 -bottom-6">Max ($1500)</span>
      </div>

    <% end %>
  <% end %>
  <%= m.with_footer do %>
    <%= button_tag "Cancel",
    class: "button text-button",
    type: "button",
    data: {
      action: "modal#close",
    } %>
    <%= button_tag "Save changes",
    class: "button text-button",
    data: {
      action: "modal#submitForm",
    } %>
  <% end %>
<% end %>
