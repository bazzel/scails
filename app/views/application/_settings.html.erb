<%= render(ModalComponent.new(title: "Settings")) do |m| %>
  <%= m.with_controller do %>
    <button
      type="button"
      class="
        relative rounded-full bg-gray-800 p-1 text-gray-400 hover:text-white
        focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2
        focus:ring-offset-gray-800
      "
    >
      <span class="absolute -inset-1.5"></span>
      <span class="sr-only">Settings</span>
      <svg
        class="w-6 h-6"
        aria-hidden="true"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        fill="currentColor"
        viewBox="0 0 24 24"
      >
        <path
          fill-rule="evenodd"
          d="M9.586 2.586A2 2 0 0 1 11 2h2a2 2 0 0 1 2 2v.089l.473.196.063-.063a2.002 2.002 0 0 1 2.828 0l1.414 1.414a2 2 0 0 1 0 2.827l-.063.064.196.473H20a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2h-.089l-.196.473.063.063a2.002 2.002 0 0 1 0 2.828l-1.414 1.414a2 2 0 0 1-2.828 0l-.063-.063-.473.196V20a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2v-.089l-.473-.196-.063.063a2.002 2.002 0 0 1-2.828 0l-1.414-1.414a2 2 0 0 1 0-2.827l.063-.064L4.089 15H4a2 2 0 0 1-2-2v-2a2 2 0 0 1 2-2h.09l.195-.473-.063-.063a2 2 0 0 1 0-2.828l1.414-1.414a2 2 0 0 1 2.827 0l.064.063L9 4.089V4a2 2 0 0 1 .586-1.414ZM8 12a4 4 0 1 1 8 0 4 4 0 0 1-8 0Z"
          clip-rule="evenodd"
        />
      </svg>
    </button>
  <% end %>
  <%= m.with_body do %>
    <%= form_with url: root_path, method: :get, data: { modal_target: "form" } do |form| %>
      <div class="relative mb-6">
        <%= form.select :root_note,
                    ChromaticScale::NOTES,
                    { selected: params[:root_note] },
                    class: "form-select peer" %>
        <%= form.label :root_note, "Root note", class: "form-label" %>
        <p class="form-text">Select the root note to start with.</p>
      </div>
      <div class="relative mb-6">
        <%= form.select :pattern_name,
                    @pattern_names_and_labels,
                    { selected: params[:pattern_name] },
                    class: "form-select peer" %>
        <%= form.label :pattern_name, "Pattern", class: "form-label" %>
      </div>
    <% end %>
  <% end %>
  <%= m.with_footer do %>
    <%= button_tag "Cancel",
    class: "button text-button",
    type: "button",
    data: {
      action: "modal#close",
    } %>
    <%= button_tag "Save changes",
    class: "button text-button",
    data: {
      action: "modal#submitForm",
    } %>
  <% end %>
<% end %>
